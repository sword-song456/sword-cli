<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <link href="test.css" type="text/css" rel="stylesheet">
    <script src="jquery.js"></script>                      //可自行下载jquery包
</head>

<body>
    <h1> ZX test demo Wavesurfer.js</h1>
    <br/> <br/> <br/> <br/> <br/>

    <script src="wavesurfer.min.js"></script>                   //此包需要从官网下载下来，src中填入合适路径即可
    <script src="wavesurfer.timeline.js"></script>              //此包需要从官网下载下来，src中填入合适的路径即可
    <script src="wavesurfer.cursor.js"></script>                //此包需要从官网下载，直接打开插件源码，按ctrl+s 选择路径保存即可，src中填入合适的路径
    <script src="wavesurfer.spectrogram.js"></script>            //这几个包都一样


    <div id="waveform" class="waveform"></div>
    <br/>
    <div id="wave-timeline" class="wave-timeline"></div>
    <div class="zoom">
       <!-- <input data-action="zoom" type="range" min="1" max="200" value="0" style="width: 100%" />    -->
        <input data-action="zoom" type="range" min="1" max="200" value="0" />
    </div>
    <div id="wave-spectrogram" class="wave-spectrogram"></div>
    <br/> <br/>
    <div class="box">
         <button id="playPause">
                            <span id="play">
                                <i class=""></i>
                                Play
                            </span>

                            <span id="pause" style="display: none">
                                <i class=""></i>
                                Pause
                            </span>
                        </button>

        <button id="btnStop">Stop</button>
    </div>
    <script>
document.addEventListener('DOMContentLoaded', function() {
var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    barHeight: 2,
    cursorColor:'#ff0000',
    progressColor:'#0000ff',
    scrollParent:true,
    height:160,
    cursorWidth:2,
    autoCenter:false,
    fillParent:true,
    hideScrollbar:false,


    plugins: [
    WaveSurfer.timeline.create({                             //timeline plugin
        container: "#wave-timeline",
        height: 10,
    }),
    WaveSurfer.cursor.create({                              //cursor plugin
            container:"#wave-cursor",
            showTime: true,
            opacity: 1,
            customShowTimeStyle: {
                'background-color': '#000',
                color: '#fff',
                padding: '2px',
                'font-size': '10px'
            }
        }),
     WaveSurfer.spectrogram.create({
            wavesurfer: wavesurfer,
            container: "#wave-spectrogram",
            labels: true,
            fftSamples:512
        })
  ]


});

//TimeLine
wavesurfer.on('ready', function () {
  var timeline = Object.create(WaveSurfer.timeline);

  timeline.create({
    wavesurfer: wavesurfer,
    container: '#wave-timeline'
  });
});

// load 音频
wavesurfer.load('0f35840eeddd47e6a6d0fe0971db277c.wav');      //此处添加自己的音频路径（可将音频存入前端可访问的文件夹内，避免跨域）

console.log(wavesurfer.getDuration());                 //test
console.log(wavesurfer.getVolume());                   // test
setTimeout(function(){                                //test
   console.log(wavesurfer.getDuration());
},500)

//Stop
btnStop.addEventListener('click', function () {
    wavesurfer.stop();
});
// PlayPause
    var playPause = document.querySelector('#playPause');
    playPause.addEventListener('click', function() {
        wavesurfer.playPause();
    });
    // Toggle play/pause text
    wavesurfer.on('play', function() {
        document.querySelector('#play').style.display = 'none';
        document.querySelector('#pause').style.display = '';
    });
    wavesurfer.on('pause', function() {
        document.querySelector('#play').style.display = '';
        document.querySelector('#pause').style.display = 'none';
    });

    var d1 = new Date();                          //test
    console.log(d1.toLocaleString());               //test
    console.log('test');                            //test

      // Zoom slider
    var slider = document.querySelector('[data-action="zoom"]');
    slider.value = wavesurfer.params.minPxPerSec;
    slider.min = wavesurfer.params.minPxPerSec;
    slider.addEventListener('input', function() {
        wavesurfer.zoom(Number(this.value));
    });

});
    </script>
</body>
</html>